{
    "##": "抖音",
    "version": "4.7.0",
    "description": "Douyin PC Client",
    "homepage": "https://www.douyin.com/",
    "license": "Freeware",
    "url": "https://lf3-cdn-tos.bytegoofy.com/obj/douyin-pc-client/7044145585217083655/releases/12159605/4.7.0/win32-ia32/douyin-v4.7.0-win32-ia32-douyin.exe#/dl.7z",
    "hash": "4c8c12b501303100c99f3d87ab58a92cfdb53ebdae175570597884ff7195de0c",
    "installer": {
        "script": [
            "Remove-Item \"$dir\\*\" -Exclude 'app.7z' -Force -Recurse",
            "Expand-7zipArchive \"$dir\\app.7z\" \"$dir\" -Removal",
            "Remove-Item \"$dir\\tray\\douyin_widget.exe\" -Force",
            "Remove-Item \"$dir\\installer_downloader.exe\" -Force",
            "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name PrivateBucket) scripts/DoradoUtils.psm1)",
            "Mount-ExternalRuntimeData -Source \"$persist_dir\\UserData\" -Target \"$env:APPDATA\\douyin\"",
            "Remove-Module -Name DoradoUtils"
        ]
    },
    "uninstaller": {
        "script": [
            "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name PrivateBucket) scripts/DoradoUtils.psm1)",
            "Dismount-ExternalRuntimeData -Target \"$env:APPDATA\\douyin\"",
            "Remove-Module -Name DoradoUtils"
        ]
    },
    "shortcuts": [
        [
            "douyin.exe",
            "抖音"
        ]
    ],
    "persist": "UserData",
    "checkver": {
        "script": [
            "$url = 'https://lf3-config.bytetcc.com/obj/tcc-config-web/tcc-v2-data-douyin.pc.web-default'",
            "$res = Invoke-RestMethod -Uri $url -Method Get",
            "$data = $res.data.download_info | ConvertFrom-Json",
            "Write-Output \"$($data.version)|$($data.apk)\""
        ],
        "regex": "(?<version>[\\d.]+)\\|.*/(?<part1>\\d+)/releases/(?<part2>\\d+)/(?<version2>[\\d.]+)/.*"
    },
    "autoupdate": {
        "url": "https://lf3-cdn-tos.bytegoofy.com/obj/douyin-pc-client/$matchPart1/releases/$matchPart2/$version/win32-ia32/douyin-v$version-win32-ia32-douyin.exe#/dl.7z"
    }
}
